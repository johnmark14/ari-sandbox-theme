# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is the **Horizon theme (v3.3.1)** by Shopify, configured as a sandbox development environment for Aribike. The theme follows Shopify's modern section-based architecture with JSON templates and Liquid components.

**Environment:** `ari-sandbox-dev` → `workmate-sandbox` store (Theme ID: 142323253366)

## Development Workflow

### Starting Development

```bash
# Start the Shopify theme development server (hot-reload enabled)
shopify theme dev
```

The dev server runs on port 9292 with automatic file watching and hot-reload. All development should be done using the dev container environment (see .devcontainer/README.md for initial setup).

### Common Commands

```bash
# Theme operations
shopify theme dev        # Start dev server with hot-reload
shopify theme push       # Deploy changes to Shopify store
shopify theme pull       # Pull latest from store
shopify theme check      # Validate theme files (Liquid, CSS, JS)
shopify theme list       # List available themes on store

# First-time setup (macOS only)
./.devcontainer/install-fonts.sh   # Install required fonts
```

### Code Quality

- **ESLint** and **Prettier** run automatically on save
- **Shopify Theme Check** validates Liquid files on save/change
- Tab size: 2 spaces, format-on-save enabled
- **Safari Compatibility**: Always test HTML/CSS/JS changes in Safari browser

## Architecture

### Template System

Templates use **JSON-based configuration** (auto-generated via Shopify admin):
- `templates/*.json` define page layouts through section references
- Sections are composed of blocks (modular, reusable components)
- Changes made in Shopify admin may overwrite local template JSON files

**Key templates:** `index.json` (homepage), `product.json`, `collection.json`, `article.json`, `cart.json`

### Component Hierarchy

```
layout/theme.liquid (HTML shell)
  └── templates/*.json (page structure)
        └── sections/*.liquid (major components)
              └── blocks/ (section sub-components)
                    └── snippets/*.liquid (shared utilities)
```

**Naming Convention:**
- Snippets prefixed with `_` are reusable components (e.g., `_card.liquid`, `_blog-post-card.liquid`)
- Sections without prefix are top-level page components
- Blocks define customizable section content

### Key Directories

- **sections/ (43 files)**: Major page components (header, footer, hero, featured-product, etc.)
  - Special: `header-group.json`, `footer-group.json` define section groups
- **snippets/ (97 files)**: Reusable Liquid partials for common patterns
- **blocks/ (96 files)**: Modular content blocks for section customization
- **assets/ (116 files)**: CSS (~123KB base.css), JavaScript (~19,770 lines total), images, fonts
- **locales/ (53 languages)**: Translation files with 50,000+ keys
- **config/**: `settings_schema.json` (theme customization options), `settings_data.json` (current values)

### Theme Configuration

**settings_schema.json** defines theme customization options:
- Color schemes and typography
- Layout controls (page width, transitions)
- Component-specific settings (buttons, badges, cards)
- Feature flags (page transitions, animations)

**shopify.theme.toml** manages environment configuration:
- Store and theme ID mapping
- Authentication credentials
- Multiple environments supported

### JavaScript Architecture

JavaScript files in `assets/` handle interactive features:
- View transitions and page animations
- Cart functionality (add/update/remove items)
- Product features (zoom dialogs, variant selection, volume pricing)
- UI components (accordions, modals, sliders)

No build system or bundler - vanilla JavaScript with Shopify-specific patterns.

## Internationalization

The theme supports 53 languages through `locales/` directory:
- `en.default.json` is the source of truth
- Each language has schema translations for UI elements
- Use `{{ 'key.path' | t }}` in Liquid for translated strings

## Development Environment

**Dev Container:**
- Node.js 20 (for Shopify CLI and tooling)
- Ruby 3.2 (Shopify CLI dependency)
- VSCode extensions: Shopify Liquid, Theme Check, ESLint, Prettier
- Dracula Pro (Van Helsing) theme with JetBrainsMono Nerd Font

**Port Forwarding:** 9292 (Shopify dev server)

## Important Notes

- **No npm/package.json**: This is a pure Shopify theme (not a Node.js project)
- **Template JSON files**: May be regenerated by Shopify admin; section and snippet changes persist
- **Git workflow**: Current branch is `dev`, PR target is `main`
- **Theme Check**: Automatically runs on save for Liquid validation
- **Safari Testing Required**: Per global settings, always verify Safari compatibility for frontend changes
